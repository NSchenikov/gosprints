Спринт 3: Уведомления в реальном времени через WebSocket

Задача:

    Добавить возможность пользователю получать уведомления о прогрессе задач в реальном времени.
    При обновлении статуса задачи «воркер» должен через WebSocket-соединение отправлять событие тому пользователю, чья задача обновилась.
    Продумать структуру сообщений (например, в формате JSON), чтобы легко расширять в будущем.

Цели:

    Освоить работу с WebSocket-соединениями в Go (подключение, чтение/запись, обработка отключений).
    Научиться связывать очередь обработки и WebSocket-уведомления.
    Изучить подходы к масштабированию WebSocket-сервисов (какой-нибудь пример с load balancing и Sticky Sessions, хотя бы теоретически).

Функциональные требования:

    WebSocket-соединения:
        Реализовать эндпоинт для подключения клиентов по WebSocket (например, /ws).
        При изменении статуса задачи воркер отправляет уведомление подключенному пользователю.
    Формат сообщений:
        JSON-сообщения, содержащие: идентификатор задачи, новый статус, временную метку, возможно, краткую информацию о задаче.
    Интеграция с основным сервисом:
        Встроить механизм уведомлений в логику обработки задач.

Нефункциональные требования:

    Обеспечение стабильности WebSocket-соединений и корректная обработка отключений.
    Проработка масштабируемости: при большом числе подключенных клиентов возможна интеграция с балансировщиками и решением вопросов sticky sessions.

        __________________________
        1) при повторном подключении user к ws что происходит со старым conn? Зависает, создавая утечку памяти или детектор дисконнекта в хэндлере может удалить новое подключение?
        Ответ: Клиент открывает новый WebSocket, NewWSHandler создаёт новый conn. AddClient заменяет старый conn на новый, но не закрывает его. Старый conn продолжает существовать в памяти, а хэндлер всё ещё висит в for { ReadMessage() }. Старая горутина не завершится. RemoveClient срабатывает только когда хэндлер получает ошибку